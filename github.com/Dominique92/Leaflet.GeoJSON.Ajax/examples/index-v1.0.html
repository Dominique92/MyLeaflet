<!DOCTYPE html>
<html lang="fr">
<head>
	<title>Leaflet extension for remote GeoJSON layers</title>
	<meta charset="utf-8">
	<link rel="icon" type="image/png" href="http://leafletjs.com/docs/images/favicon.ico" />

	<!-- Leaflet kernel -->
	<!-- For Leaflet V1.0 : https://github.com/Leaflet/Leaflet/tree/v1.0.0-beta.2 -->
	<link rel="stylesheet" href="../../../libs/Leaflet-1.0-beta-2/leaflet.css" />
	<script src="../../../libs/Leaflet-1.0-beta-2/leaflet-src.js"></script>

	<!-- Erictheise.rrose pluggin -->
	<link rel="stylesheet" href="http://erictheise.github.io/rrose/stylesheets/leaflet.rrose.css" />
	<script src="http://erictheise.github.io/rrose/javascripts/leaflet.rrose-src.js"></script>

	<!-- This pluggin -->
	<link rel="stylesheet" href="GeoJSON.Ajax.css" />
	<script src="GeoJSON.Style.js"></script>
	<script src="GeoJSON.Ajax.js"></script>

	<script>
		window.addEventListener('load', function() {
			map = new L.Map('map', {
				center: new L.LatLng(46.8, 2),
				zoom: 6,
				layers: [
					new L.TileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
						attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'
					}),
					new L.GeoJSON.Ajax(
						'http://www.refuges.info/api/polygones', {
							argsGeoJSON: {
								type_polygon: 1
							},
							url: function(target) {
								return target.feature.properties.lien;
							},
							style: function(feature) {
								return {
									color: feature.properties.couleur,
									weight: 2,
									opacity: 0.5
								}
							}
						}
					),
					new L.GeoJSON.Ajax(
						'http://www.refuges.info/api/bbox', {
							argsGeoJSON: {
								type_points: 'all'
							},
							bbox: true,
							degroup: 12,
							url: function(target) {
								return 'http://www.refuges.info/point/' + target.feature.properties.id;
							},
							icon: function(feature) {
								return {
									url: 'http://www.refuges.info/images/icones/' + feature.properties.type.icone + '.png',
									size: 16
								}
							}
						}
					)
				]
			});
		});
	</script>
</head>

<body>
	<p>Leaflet extension for remote GeoJSON layers (Markers, Polylines, Polygons, ...)</p>
	<p>Sources on <a href= "https://github.com/Dominique92/Leaflet.GeoJSON.Ajax">Github: Dominique92/Leaflet.GeoJSON.Ajax</a></p>
	<p>Leaflet V<script>document.write(L.version)</script></p>

	<div id="map" style="width: 800px; height: 600px"></div>

	<br/><p>This plugin is also supported on Leaflet V0.7 : <a href="index.html">Test on Leaflet V0.7</a></p>
	<div style="position: absolute;right:0;top:0"><a href="../Leaflet.Map.MultiVendors">&gt;</a>&nbsp;</div>
</body>
</html>
