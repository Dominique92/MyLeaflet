<!DOCTYPE html>
<html lang="fr">
<head>
	<title>Leaflet extension for remote GeoJSON layers</title>
	<meta charset="utf-8">
	<link rel="icon" type="image/png" href="http://leafletjs.com/docs/images/favicon.ico" />

	<!-- Leaflet kernel -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

	<!-- Erictheise.rrose pluggin -->
	<link rel="stylesheet" href="http://erictheise.github.io/rrose/stylesheets/leaflet.rrose.css" />
	<script src="http://erictheise.github.io/rrose/javascripts/leaflet.rrose-src.js"></script>

	<!-- This pluggin -->
	<link rel="stylesheet" href="GeoJSON.Ajax.css" />
	<script src="src/GeoJSON.Style.js"></script>
	<script src="src/GeoJSON.Ajax.js"></script>

	<script>
		window.addEventListener('load', function() {
			map = new L.Map('map', {
				center: new L.LatLng(46.8, 2),
				zoom: 6
			});

			// Baselayer
			new L.TileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'
			}).addTo(map);

			// Europe mountain points of interest
			new L.GeoJSON.Ajax(
				'http://www.refuges.info/api/bbox', {
					argsGeoJSON: {
						type_points: 'all'
					},
					bbox: true,
					style: function(feature) {
						return {
							url: feature.properties.lien,
							iconUrl: 'http://www.refuges.info/images/icones/' + feature.properties.type.icone + '.png',
							iconAnchor: [8, 8],
							title: feature.properties.nom,
							popupAnchor: [-1, -9],
							degroup: 12 // Spread the icons when the cursor hover on a busy area.
						};
					}
				}
			).addTo(map);

			// French mountain limits
			new L.GeoJSON.Ajax(
				'http://www.refuges.info/api/polygones', {
					argsGeoJSON: {
						type_polygon: 1
					},
					bbox: true,
					style: function(feature) {
						return {
							title: feature.properties.nom,
							popupAnchor: [-1, -4],
							url: feature.properties.lien,
							color: feature.properties.couleur,
							weight: 2
						};
					}
				}
			).addTo(map);
		});
	</script>
</head>

<body>
	<p>Leaflet extension for remote GeoJSON layers (Markers, Polylines, Polygons, ...)</p>
	<p>Sources on <a href= "https://github.com/Dominique92/Leaflet.GeoJSON.Ajax">Github: Dominique92/Leaflet.GeoJSON.Ajax</a></p>
	<p>Leaflet <script>document.write(L.version)</script></p>

	<div id="map" style="width: 800px; height: 600px"></div>

	<br/><p>This plugin is also supported on Leaflet V1.0 : <a href="examples/index-v1.0.html">Test on Leaflet V1.0</a></p>
	<div style="position: absolute;right:0;top:0"><a href="examples/index-v1.0.html">&gt;</a>&nbsp;</div>
</body>
</html>
