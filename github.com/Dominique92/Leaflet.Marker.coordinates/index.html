<!DOCTYPE html>
<html lang="fr">
<head>
	<title>Leaflet</title>
	<meta charset="utf-8">
	<link rel="icon" type="image/png" href="http://leafletjs.com/docs/images/favicon.ico" />


	<!-- Leaflet kernel -->
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
	<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

	<!-- projections -->
	<script src="http://dominique92.github.io/MyLeaflet/github.com/kartena/Proj4Leaflet/lib/proj4-compressed.js"></script>
	<script src="http://dominique92.github.io/MyLeaflet/github.com/kartena/Proj4Leaflet/src/proj4leaflet.js"></script>
	<script src="../Leaflet.Map.MultiVendors/layers/SwissTopo.js"></script>

	<script src="Marker.coordinates.js"></script>

	<script>
		var map, frame, viewfinder;
		window.addEventListener('load', function() {
			map = L.map('map');

			new L.TileLayer('http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a>'
			}).addTo(map);

			// frame fixe marquant une position. La carte est centrée autour
			frame = new L.Marker([45.78, 3.08], { // Position par défaut
					clickable: false, // Evite d'activer le viewfinder: curseur
					icon: L.icon({
						iconUrl: 'images/frame.png',
						iconAnchor: [15, 21]
					})
				})
				.coordinates('position') // Affiche les coordonnées
				.addTo(map);
			// Recentre la carte sur ce frame
			map.setView(frame._latlng, 6, {
				reset: true
			});

			// viewfinder déplaçable affichant sa position éditable.
			viewfinder = new L.Marker([45.78, 3.08], {
					draggable: true,
					icon: L.icon({
						iconUrl: 'images/viewfinder.png',
						iconAnchor: [15, 15]
					})
				})
				.coordinates('viewfinder') // Affiche / saisi les coordonnées
				.addTo(map);
		});
	</script>
</head>

<body>
	<p>Leaflet V<script>document.write(L.version)</script></p>
	<div id="map" style="width: 800px; height: 600px;"></div>

	<p>
		<span id="position-title-lng"></span>: <em id="position-proj-lng"></em>
		<span id="position-title-lat"></span>: <em id="position-proj-lat"></em>
		<select id="position-select"></select>
	</p>

	<p>
		<span id="viewfinder-title-lng"></span>:
		<input type="text" id="viewfinder-proj-lng" name="latitude" size="12" maxlength="12" />
		<span id="viewfinder-title-lat"></span>:
		<input type="text" id="viewfinder-proj-lat" name="latitude" size="12" maxlength="12" />
		<select id="viewfinder-select"><option value="decimal"></option></select>
	</p>

	<p><a onclick="map.panTo(viewfinder._latlng)" style="color:blue;cursor:pointer;text-decoration:underline">Recentrer la carte sur le curseur</a></p>
	<p><a onclick="viewfinder.setLatLng(map.getCenter())" style="color:blue;cursor:pointer;text-decoration:underline">Remettre le curseur au centre actuel de la carte</a></p>
	<form method="post" action="#">
		<input id="viewfinder-json" type="text" name="geom" size="120" value='{"type":"Point","coordinates":[8.5,46.5]}' />
		<br/>
		<button type="submit" name="action" value="Modifier">Modifier</button>
	</form>

	<p>This demo works also on <a href="frame-v1.0.php">Leaflet V1.0</a></p>
</body>
</html>
